#include <iostream>
#include <map>
#include <string>
#include <vector>

using namespace std;
class UserAuthenticator {
private:
    map<string, string> users; // username -> password mapping
    map<string, string> userRoles; // username -> role mapping

public:
    // Constructor
    UserAuthenticator() {
        // Add some sample users and their passwords
        users["user1"] = "password1";
        users["user2"] = "password2";

        // Assign roles to users
        userRoles["user1"] = "admin";
        userRoles["user2"] = "user";
    }

    // Method to authenticate user
    bool authenticateUser(const string& username, const string& password) {
        map<string, string>::iterator it = users.find(username);
        if (it != users.end() && it->second == password) {
            cout << "User authenticated successfully!" << endl;
            return true;
        }
        cout << "Invalid username or password." << endl;
        return false;
 }

    // Method to check authorization and return role
    string authorizeUser(const string& username) {
        map<string, string>::iterator it = userRoles.find(username);
        if (it != userRoles.end()) {
            return it->second;
        }
        return "";
    }

    // Method to add a new user
    void addUser(const string& username, const string& password, const string& role) {
        users[username] = password;
        userRoles[username] = role;
        cout << "User added successfully!" << endl;
    }
};


// Class for patient registration
class PatientRegistration {
private:
    map<string, pair<string, string>> patientDetails; // name -> (contact, date of birth) mapping

public:
    // Method to register a new patient
    void registerPatient(const string& name, const string& contact, const string& dob) {
        patientDetails[name] = make_pair(contact, dob);
        cout << "Patient " << name << " registered successfully!" << endl;
    }

    // Method to display patient details
    void displayPatientDetails(const string& name) {
        map<string, pair<string, string>>::iterator it = patientDetails.find(name);
        if (it != patientDetails.end()) {
            cout << "Name: " << it->first << endl;
            cout << "Contact: " << it->second.first << endl;
            cout << "Date of Birth: " << it->second.second << endl;
        } else {
            cout << "Patient not found." << endl;
        }
    }
};


// Class for doctor registration
class DoctorRegistration {
private:
    map<string, pair<string, string>> doctorDetails; // name -> (contact, specialization) mapping

public:
    // Method to register a new doctor
    void registerDoctor(const string& name, const string& contact, const string& specialization) {
        doctorDetails[name] = make_pair(contact, specialization);
        cout << "Doctor " << name << " registered successfully!" << endl;
    }

    // Method to display doctor details
    void displayDoctorDetails(const string& name) {
        map<string, pair<string, string>>::iterator it = doctorDetails.find(name);
        if (it != doctorDetails.end()) {
            cout << "Name: " << it->first << endl;
            cout << "Contact: " << it->second.first << endl;
            cout << "Specialization: " << it->second.second << endl;
        } else {
            cout << "Doctor not found." << endl;
        }
    }
};

// Class for patient history
class PatientHistory {
private:
    map<string, vector<string>> patientHistory; // name -> list of medical history entries

public:
    // Method to add patient history
    void addPatientHistory(const string& name, const string& history) {
        patientHistory[name].push_back(history);
        cout << "Patient history added successfully!" << endl;
    }

    // Method to display patient history
    void displayPatientHistory(const string& name) {
        map<string, vector<string>>::iterator it = patientHistory.find(name);
        if (it != patientHistory.end()) {
            cout << "Medical History of " << name << ":" << endl;
            for (const string& entry : it->second) {
                cout << "- " << entry << endl;
            }
        } else {
            cout << "Patient not found." << endl;
        }
    }
};

// Class for doctor history
class DoctorHistory {
private:
    map<string, vector<string>> doctorHistory; // name -> list of doctor history entries

public:
    // Method to add doctor history
    void addDoctorHistory(const string& name, const string& history) {
        doctorHistory[name].push_back(history);
        cout << "Doctor history added successfully!" << endl;
    }

    // Method to display doctor history
    void displayDoctorHistory(const string& name) {
        map<string, vector<string>>::iterator it = doctorHistory.find(name);
        if (it != doctorHistory.end()) {
            cout << "History of " << name << ":" << endl;
            for (const string& entry : it->second) {
                cout << "- " << entry << endl;
            }
        } else {
            cout << "Doctor not found." << endl;
        }
    }
};

// Class for managing medical history
class MedicalHistory {
private:
    map<string, vector<string>> medicalHistory; // patient name -> list of medical history entries

public:
    // Method to add a medical history entry
    void addMedicalHistory(const string& patientName, const string& entry) {
        medicalHistory[patientName].push_back(entry);
        cout << "Medical history entry added successfully!" << endl;
    }

    // Method to display medical history for a patient
    void displayMedicalHistory(const string& patientName) {
        map<string, vector<string>>::iterator it = medicalHistory.find(patientName);
        if (it != medicalHistory.end()) {
            cout << "Medical History of " << patientName << ":" << endl;
            for (const string& entry : it->second) {
                cout << "- " << entry << endl;
            }
        } else {
            cout << "Medical history for " << patientName << " not found." << endl;
        }
    }
};

// Class for appointment scheduling
class AppointmentScheduler {
private:
    map<string, string> appointments; // date -> patient name mapping

public:
    // Method to schedule an appointment
    void scheduleAppointment(const string& date, const string& patientName) {
        appointments[date] = patientName;
        cout << "Appointment scheduled successfully!" << endl;
    }

    // Method to cancel an appointment
    void cancelAppointment(const string& date) {
        map<string, string>::iterator it = appointments.find(date);
        if (it != appointments.end()) {
            appointments.erase(it);
            cout << "Appointment canceled successfully!" << endl;
        } else {
            cout << "No appointment found on that date." << endl;
        }
    }

    // Method to display scheduled appointments
    void displayAppointments() {
        if (appointments.empty()) {
            cout << "No appointments scheduled." << endl;
        } else {
            cout << "Scheduled Appointments:" << endl;
            for (const auto& appointment : appointments) {
                cout << "Date: " << appointment.first << ", Patient: " << appointment.second << endl;
            }
        }
    }
};

// Class for updating patient records
class RecordUpdater {
private:
    map<string, vector<string>> patientRecords; // patient name -> list of diagnoses and treatments

public:
    // Method to add a diagnosis or treatment to a patient's record
    void updatePatientRecord(const string& patientName, const string& update) {
        patientRecords[patientName].push_back(update);
        cout << "Patient record updated successfully!" << endl;
    }

    // Method to display patient's record
    void displayPatientRecord(const string& patientName) {
        map<string, vector<string>>::iterator it = patientRecords.find(patientName);
        if (it != patientRecords.end()) {
            cout << "Record of " << patientName << ":" << endl;
            for (const string& entry : it->second) {
                cout << "- " << entry << endl;
            }
        } else {
            cout << "Patient not found." << endl;
        }
    }
};

// Class for managing medical history
class MedicalHistory {
private:
    map<string, vector<string>> medicalHistory; // patient name -> list of medical history entries

public:
    // Method to add a medical history entry
    void addMedicalHistory(const string& patientName, const string& entry) {
        medicalHistory[patientName].push_back(entry);
        cout << "Medical history entry added successfully!" << endl;
    }

    // Method to display medical history for a patient
    void displayMedicalHistory(const string& patientName) {
        map<string, vector<string>>::iterator it = medicalHistory.find(patientName);
        if (it != medicalHistory.end()) {
            cout << "Medical History of " << patientName << ":" << endl;
            for (const string& entry : it->second) {
                cout << "- " << entry << endl;
            }
        } else {
            cout << "Medical history for " << patientName << " not found." << endl;
        }
    }
};